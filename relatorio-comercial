Com certeza. Abaixo está um resumo das operações realizadas na tabela PREDA1030 (DA1), formatado para análise.

Resumo das Operações na Tabela PREDA1030 (DA1)

A tabela PREDA1030, também conhecida como DA1, é a base para o gerenciamento de preços de produtos. As operações realizadas nessa tabela seguem dois fluxos principais, dependendo se o objetivo é congelar ou calcular os preços.

1. Fluxo de Congelamento de Preços

Este fluxo é ativado quando a intenção é copiar os preços da semana anterior para a semana atual, sem recalculá-los.

    Deleção: Registros de preço da semana atual são excluídos.

    Cópia: Registros de preço da última movimentação da semana anterior são copiados para a semana atual. Os campos de data e hora são atualizados.

    Finalidade: Garantir que os preços da semana anterior sejam mantidos para a semana de referência, "congelando-os".

2. Fluxo de Cálculo de Preços

Este fluxo é ativado para calcular novos preços com base nos custos de produção e nas regras de margem de lucro (markup).

    Deleção: Registros de preço da semana atual são excluídos.

    Cálculo: Para cada produto, o sistema executa a função ORTP169C para calcular o custo de produção. Esse cálculo é feito pela soma do custo de todos os materiais e componentes, com um ajuste de 5% de quebra.

    Markup: Com o custo em mãos, o preço de venda é calculado multiplicando o custo pelo markup definido para o produto.

    Inserção: Os novos registros, contendo o custo de produção e o preço de venda calculados, são inseridos na tabela PREDA1030.

    Inclusão de Terceiros: Se aplicável, produtos de terceiros também são inseridos neste processo, com seus respectivos preços.

    Finalidade: Gerar uma nova tabela de preços, com valores atualizados com base em regras de negócio e custos reais de produção.

Observações Gerais

Em ambos os fluxos, a operação segue um padrão de limpeza (deleção) e escrita (inserção), garantindo que a tabela de preços de destino seja sempre uma nova versão, sem misturar dados antigos com novos.

Essa rotina é fundamental para manter a tabela de preços atualizada para as operações de venda e precificação do ERP.
